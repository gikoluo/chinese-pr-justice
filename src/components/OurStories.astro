---
// OurStories Section component (EN + 中文)
import { storiesSection } from '../i18n/strings';
---

<section id="stories" class="stories-section">
    <div class="container">
        <h2><span class="lang-en">{storiesSection.title.en}</span><span class="lang-zh">{storiesSection.title.zh}</span><span class="lang-fr">{storiesSection.title.fr}</span></h2>
        <p class="section-intro"><span class="lang-en">{storiesSection.subtitle.en}</span><span class="lang-zh">{storiesSection.subtitle.zh}</span><span class="lang-fr">{storiesSection.subtitle.fr}</span></p>

        <div class="stories-scroll-wrap">
            <div class="stories-grid">
            <!-- Story 1 -->
            <div class="story-card" data-story>
                <div class="story-delay">
                    <span class="story-delay-number">40</span>
                    <div class="story-delay-labels">
                        <span class="story-delay-label">Months</span>
                        <span class="story-delay-sub">Waiting for IRCC</span>
                    </div>
                </div>
                <div class="story-header">
                    <div class="story-meta">
                        <p class="story-meta-line"><span class="story-meta-title">BC PNP Applicant</span>, <span class="story-location">Richmond, BC</span></p>
                    </div>
                </div>
                <p class="story-teaser">I applied for PR through BC PNP over 3.5 years ago. All requirements passed—eligibility, criminality, medical. Only security screening remains. My CBSA notes document a pattern of missed deadlines. Now my son faces $130,000-200,000 in extra tuition costs because our work permits don't qualify for domestic rates anymore.</p>
                <div class="story-content-full" hidden>
                    <p><strong>My name is Chunhui Luo.</strong> I applied for Permanent Residence through BC PNP in August 2022 — over 3.5 years ago. I followed every rule, submitted every document, paid every fee. All admissibility requirements passed: <strong>Eligibility ✓ Criminality ✓ Medical ✓</strong> Only security screening remains — and it has consumed over 40 months of my life.</p>

                    <p><strong>The Pattern of Broken Promises:</strong> My CBSA notes document a disturbing pattern of missed deadlines. IRCC sets "due dates" then ignores them. The latest deadline is June 6, 2026. My MP was told I "may receive a potential update in July 2026, but this is not guaranteed." After 40+ months, even IRCC won't commit to their own deadlines.</p>

                    <p><strong>My Son's Education Crisis:</strong> My son is in Grade 11. He will apply to Canadian universities in Fall 2026 for Fall 2027 admission. Without PR, he faces international tuition: <strong>$40,000-65,000 per year</strong>. With PR, domestic tuition is <strong>$7,000-15,000 per year</strong>. Over 4 years, that's a difference of <strong>$130,000-200,000</strong>.</p>

                    <p><strong>Our Backup Plan Collapsed:</strong> I hold a Bridging Open Work Permit (BOWP) because my PR application is pending. Until May 2025, UBC offered domestic tuition to work permit holders' dependents. But UBC repealed that policy effective May 1, 2025. I researched every top Canadian university — UBC, SFU, U of T, McGill, McMaster, Waterloo, Western, Queen's. <strong>My BOWP doesn't qualify at a single one.</strong> They all require closed work permits with provincial employers. PR is the ONLY way my son can access domestic tuition.</p>

                    <p><strong>The October 2026 Deadline:</strong> My work permit and my son's study permit expire in October 2026. If PR isn't approved, we must apply for extension or leave Canada — the country my son calls home. Even with extension, it won't solve the tuition problem. My son has excellent grades and would qualify for $50,000-150,000 in domestic scholarships — but only if we have PR.</p>

                    <p><strong>The Financial Burden:</strong> This delay has already cost us thousands. Medical exams ($450+ each) expire after 12 months — I've redone mine multiple times. Police certificates from China expired and had to be reapplied for. Each missed IRCC deadline means another expired document, another fee, another reminder that <em>the system is failing us.</em></p>

                    <p><strong>Why Is This Happening?</strong> I am Chinese. Most applicants facing 3-5+ year security screening delays are Chinese. Others from different countries with similar profiles move through in 12-18 months. IRCC's own posted processing time is <strong>12 months</strong> (updated January 14, 2026). We are experiencing <strong>40+ months</strong> — over 3 times the estimate — with no explanation, no transparency, no accountability.</p>

                    <p><strong>What I'm Asking For:</strong> I'm not asking for special treatment. I'm asking for <em>equal treatment</em>. I'm asking for transparency about what security concerns remain after 40 months when I've already passed every other check. I'm asking for my son to have the same opportunities as other Canadian kids — to attend university without his family being bankrupted or deported.</p>

                    <p class="story-quote">"We followed every rule. We paid every fee. We waited patiently. Yet we're treated like we don't deserve basic fairness. My son's future is being destroyed by bureaucratic delays and what feels like systematic discrimination. After 40 months, 'patience' is no longer enough. We demand action."</p>

                    <p><strong>— Chunhui Luo</strong><br>
                    Richmond, BC<br>
                    Email: <a href="mailto:ca@luochunhui.com">ca@luochunhui.com</a></p>

                    <div class="story-timeline">
                        <strong>Timeline:</strong> Applied BC PNP Aug 2022 → All passed by mid-2023 → Security screening begins → June 6, 2026 deadline (from MP) → July 2026 update expected (not guaranteed) → Work permits expire Oct 2026 → Son applies to universities Fall 2026 → University starts Fall 2027
                    </div>
                </div>
                <button type="button" class="story-toggle" aria-expanded="false">Read full story</button>
            </div>

            <!-- Story 2: Federal applicant, security passed then reverted -->
            <div class="story-card" data-story>
                <div class="story-delay">
                    <span class="story-delay-number">38</span>
                    <div class="story-delay-labels">
                        <span class="story-delay-label">Months</span>
                        <span class="story-delay-sub">Waiting for IRCC</span>
                    </div>
                </div>
                <div class="story-header">
                    <div class="story-meta">
                        <p class="story-meta-line"><span class="story-meta-title">Jeff Yan</span>, <span class="story-location">Canada</span></p>
                    </div>
                </div>
                <p class="story-teaser">My journey to secure permanent residency in Canada has turned into a nightmare of bureaucratic inaction and inexplicable delays. I submitted my federal application in November 2022, hoping for a new beginning for my family. Security passed in December 2023—then inexplicably reverted to "Security in Progress" in January 2024. Over a year later, two Mandamus applications dismissed, MP interventions with no results. I am demanding that IRCC and CBSA address the facts and finalize my application immediately.</p>
                <div class="story-content-full" hidden>
                    <p>My journey to secure permanent residency in Canada has turned into a nightmare of bureaucratic inaction and inexplicable delays. I submitted my federal application in November 2022, hoping for a new beginning for my family.</p>
                    <p>For a while, everything seemed to be on track. In July 2023, I received my Pre-Arrival Letter (PAL). Then came the crucial breakthrough: according to the official Tracker and CBSA notes, my Security Screening passed on December 8, 2023, with a validity date set until December 7, 2025. I felt relief, believing the finish line was near.</p>
                    <p>However, that relief was short-lived. On January 29, 2024, without any justification or change in my circumstances, my status inexplicably reverted to "Security in Progress" according to CBSA notes.</p>
                    <p>What followed has been over a year of frustration. I have had to file two Mandamus applications, both of which were dismissed. Despite complaints to CSIS confirming they completed their screening on March 5, 2025, IRCC continues to ignore the facts. I have sent countless emails to CBSA executives, only to receive the same automated, template replies stating "security in progress." Even interventions by two different Members of Parliament have yielded no results, only empty assurances.</p>
                    <p>I am an English major with an MBA, worked in the private sector in import/export for auto parts and agricultural fertilizer. I have never traveled to sensitive countries, and my family has no background that would warrant this scrutiny. I am caught in a loop of repeated security screenings for no apparent reason, and IRCC refuses to explain why a passed security check was disregarded.</p>
                    <p>The impact on my life has been devastating:</p>
                    <p><strong>Mental Toll:</strong> The extreme uncertainty has caused immense mental and emotional distress.</p>
                    <p><strong>Family Separation:</strong> My mother is ill, but because I am on a closed work permit, I cannot leave my job to return to China to care for her.</p>
                    <p><strong>Financial Strain:</strong> Because my status remains pending, both of my children are forced to pay international student tuition fees, placing a massive burden on our family.</p>
                    <p>I am demanding that IRCC and CBSA stop this injustice, address the facts of my case, and finalize my application immediately.</p>
                    <p><strong>— Jeff Yan</strong><br>
                    Email: <a href="mailto:jeffyan999@gmail.com">jeffyan999@gmail.com</a></p>
                    <div class="story-timeline">
                        <strong>Timeline:</strong> Federal application Nov 2022 → PAL July 2023 → Security passed Dec 8, 2023 (valid to Dec 7, 2025) → Status reverted to "Security in Progress" Jan 29, 2024 → Two Mandamus applications dismissed → CSIS confirmed screening complete March 5, 2025 → IRCC/CBSA still no resolution
                    </div>
                </div>
                <button type="button" class="story-toggle" aria-expanded="false">Read full story</button>
            </div>

            <!-- Story 3 - Template for others to add -->
            <div class="story-card story-template" data-story>
                <div class="story-delay">
                    <span class="story-delay-number">—</span>
                    <div class="story-delay-labels">
                        <span class="story-delay-label">Months</span>
                        <span class="story-delay-sub">Waiting for IRCC</span>
                    </div>
                </div>
                <div class="story-header">
                    <div class="story-meta">
                        <p class="story-meta-line"><span class="story-meta-title">Immigration Program</span>, <span class="story-location">City, Province</span></p>
                    </div>
                </div>
                <p class="story-teaser">This space is for your story. Email us your experience to be added to this page.</p>
                <div class="story-content-full" hidden>
                    <p><em>This space is for your story. Email us your experience to be added to this page.</em></p>
                    <ul>
                        <li>How long have you been waiting?</li>
                        <li>What has the delay cost you and your family?</li>
                        <li>What do you want the government to know?</li>
                    </ul>
                    <p><strong>Contact us to share your story.</strong></p>
                </div>
                <button type="button" class="story-toggle" aria-expanded="false">Read full story</button>
            </div>

            <!-- Placeholder for more stories -->
            <div class="story-card story-placeholder">
                <div class="story-delay story-delay-placeholder">
                    <span class="story-delay-number">+</span>
                    <div class="story-delay-labels">
                        <span class="story-delay-label">More</span>
                        <span class="story-delay-sub">Stories</span>
                    </div>
                </div>
                <h3><span class="lang-en">{storiesSection.moreStories.en}</span><span class="lang-zh">{storiesSection.moreStories.zh}</span><span class="lang-fr">{storiesSection.moreStories.fr}</span></h3>
                <p><span class="lang-en">We are collecting stories from affected Chinese PR applicants across Canada.</span><span class="lang-zh">我们正在征集全加受影响的华人PR申请人的故事。</span><span class="lang-fr">Nous recueillons les témoignages des demandeurs de RP chinois touchés partout au Canada.</span></p>
                <p><strong><span class="lang-en">Do you have a story to share?</span><span class="lang-zh">你有故事要分享吗？</span><span class="lang-fr">Avez-vous une histoire à partager?</span></strong></p>
                <a href="/join" class="btn btn-secondary"><span class="lang-en">{storiesSection.shareStory.en}</span><span class="lang-zh">{storiesSection.shareStory.zh}</span><span class="lang-fr">{storiesSection.shareStory.fr}</span></a>
            </div>
            </div>
        </div>

        <div class="stories-callout">
            <h3><span class="lang-en">{storiesSection.notIsolatedTitle.en}</span><span class="lang-zh">{storiesSection.notIsolatedTitle.zh}</span><span class="lang-fr">{storiesSection.notIsolatedTitle.fr}</span></h3>
            <p><span class="lang-en">{storiesSection.notIsolatedDesc.en}</span><span class="lang-zh">{storiesSection.notIsolatedDesc.zh}</span><span class="lang-fr">{storiesSection.notIsolatedDesc.fr}</span></p>
            <p><strong><span class="lang-en">{storiesSection.notIsolatedTogether.en}</span><span class="lang-zh">{storiesSection.notIsolatedTogether.zh}</span><span class="lang-fr">{storiesSection.notIsolatedTogether.fr}</span></strong></p>
        </div>
    </div>
</section>

<style>
    .stories-section {
        background: var(--bg-stories-section);
        color: #e2e8f0;
    }

    .stories-section h2 {
        color: #e2e8f0;
    }

    .stories-section :global(.section-intro) {
        color: #a0aec0;
    }

    .stories-scroll-wrap {
        overflow-x: auto;
        overflow-y: hidden;
        margin: 0 -20px 2rem;
        padding: 0 20px 0.5rem;
        -webkit-overflow-scrolling: touch;
    }

    .stories-scroll-wrap::-webkit-scrollbar {
        height: 6px;
    }

    .stories-scroll-wrap::-webkit-scrollbar-track {
        background: #1a202c;
        border-radius: 3px;
    }

    .stories-scroll-wrap::-webkit-scrollbar-thumb {
        background: #4a5568;
        border-radius: 3px;
    }

    .stories-grid {
        display: flex;
        flex-wrap: nowrap;
        gap: 1.25rem;
        min-width: min-content;
    }

    .story-card {
        flex: 0 0 auto;
        width: 310px;
        min-height: 260px;
        background: var(--bg-stories-card);
        color: #e2e8f0;
        padding: 1.25rem;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        border-left: 4px solid var(--accent-color);
        display: flex;
        flex-direction: column;
    }

    .story-delay {
        background: var(--bg-stories-delay);
        border-radius: 6px;
        padding: 0.75rem 1rem;
        margin-bottom: 0.75rem;
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 0.75rem;
    }

    .story-delay-number {
        font-size: 3rem;
        font-weight: 800;
        line-height: 1;
        color: var(--red);
        flex-shrink: 0;
    }

    .story-delay-labels {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
    }

    .story-delay-label {
        display: block;
        font-size: 0.9375rem;
        font-weight: 700;
        color: #e2e8f0;
        line-height: 1.2;
    }

    .story-delay-sub {
        display: block;
        font-size: 0.75rem;
        color: #a0aec0;
        margin-top: 0.125rem;
    }

    .story-delay-placeholder {
        flex-direction: row;
    }

    .story-delay-placeholder .story-delay-number {
        font-size: 1.5rem;
    }

    .story-delay-placeholder .story-delay-labels .story-delay-label {
        font-size: 0.9375rem;
    }

    .story-header {
        margin-bottom: 0.5rem;
    }

    .story-meta-line {
        margin: 0;
        font-size: 1rem;
        font-weight: 700;
        color: #e2e8f0;
        line-height: 1.4;
    }

    .story-meta-line .story-location {
        font-weight: 700;
        color: #cbd5e0;
    }

    .story-teaser {
        font-size: 0.9375rem;
        line-height: 1.55;
        color: #cbd5e0;
        margin: 0 0 0.75rem;
        flex-grow: 1;
    }

    .story-content-full {
        font-size: 1rem;
        line-height: 1.7;
        margin-bottom: 1rem;
    }

    .story-content-full[hidden] {
        display: none !important;
    }

    .story-content-full p {
        margin-bottom: 1rem;
    }

    .story-content-full .story-quote {
        font-style: italic;
        padding: 1rem 1.25rem;
        background: var(--bg-light);
        color: var(--text-dark);
        border-left: 4px solid var(--accent-color);
        margin: 1rem 0;
        font-size: 1.0625rem;
    }

    .story-content-full .story-timeline {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid var(--border-color);
        color: var(--text-light);
        font-size: 0.875rem;
    }

    .story-toggle {
        margin-top: auto;
        padding: 0.4rem 0.875rem;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--accent-color);
        background: transparent;
        border: 1px solid var(--accent-color);
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.2s, color 0.2s;
        align-self: flex-start;
    }

    .story-toggle:hover {
        background: var(--accent-color);
        color: white;
    }

    .story-template {
        border-left-color: var(--secondary-color);
    }

    .story-placeholder {
        background: var(--bg-stories-delay);
        border-left-color: #718096;
        text-align: center;
        color: #e2e8f0;
    }

    .story-placeholder h3 {
        margin-bottom: 0.75rem;
        font-size: 1.125rem;
        color: #e2e8f0;
    }

    .story-placeholder p {
        margin-bottom: 0.5rem;
        font-size: 0.9375rem;
        color: #a0aec0;
    }

    .story-placeholder :global(.btn-secondary) {
        color: #e2e8f0;
        border-color: #718096;
    }

    .story-placeholder :global(.btn-secondary:hover) {
        background: #718096;
        color: white;
        border-color: #718096;
    }

    .stories-callout {
        background: var(--bg-stories-delay);
        padding: 2rem;
        border-radius: 8px;
        text-align: center;
        color: #e2e8f0;
    }

    .stories-callout h3 {
        font-size: 1.75rem;
        margin-bottom: 0.75rem;
        color: var(--accent-color);
    }

    .stories-callout p {
        font-size: 1rem;
        line-height: 1.7;
        max-width: 800px;
        margin: 0 auto 0.75rem;
        color: #cbd5e0;
    }
</style>
